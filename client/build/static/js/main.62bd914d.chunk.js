(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{76:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n,c,r,s,i,l,o=a(3),d=a.n(o),j=a(57),b=a.n(j),u=(a(76),a(9)),m=(a(77),a(20)),p=a(7),h=a(67),x=a(89),O=a(101),g=a(99),v=a(66),w=a(31),f=a(14),N=a(22),y=a.n(N),k=a(93),S=a(94),_=a(25),C=a(100),I=(Object(C.a)(n||(n=Object(_.a)(["\n  query getProducts($category: String) {\n    products(category: $category) {\n      _id\n      title\n      description\n      starBid\n      image\n      category \n    }\n  }\n"]))),Object(C.a)(c||(c=Object(_.a)(["\n    {\n    products{\n      _id\n      title\n      description\n      image\n      startBid\n      category\n    }\n  }\n"])))),$=Object(C.a)(r||(r=Object(_.a)(["\n  {\n    user {\n      _id\n      username\n      watchlist{\n        _id\n        title\n        description\n        startBid\n        category \n        image\n      } \n    }\n  }\n"]))),B=Object(C.a)(s||(s=Object(_.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),T=Object(C.a)(i||(i=Object(_.a)(["\n  mutation addUser(\n    $username: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      username: $username\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),W=Object(C.a)(l||(l=Object(_.a)(["\n  mutation addToWatchlist($productId: ID!) {\n    addToWatchlist(productId: $productId) {\n      _id\n      username\n      email\n      watchlist {\n        _id\n        title\n        description\n        startBid\n        category \n        image\n      }\n    }\n  }\n"]))),P=a(59),L=a(60),D=a(47),E=a.n(D),F=new(function(){function e(){Object(P.a)(this,e)}return Object(L.a)(e,[{key:"getProfile",value:function(){return E()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return E()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),A=a(102),U=a(2),J=function(){var e=Object(k.a)(I),t=(e.loading,e.data);console.log("***",t);var a=(null===t||void 0===t?void 0:t.products)||[];console.log("---",a);var n=Object(S.a)(W),c=Object(f.a)(n,2),r=c[0],s=(c[1].error,function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("product id",t),F.loggedIn()?F.getToken():null){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,r({variables:{productId:t}});case 7:a=e.sent,a.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}());return Object(U.jsxs)("div",{className:"container p-3",children:[Object(U.jsx)("h1",{className:"text-center pt-5",children:"View our Gallery:"}),Object(U.jsx)("div",{className:"card_wrap--outer",children:Object(U.jsx)("div",{className:"card__wrap--inner",children:Object(U.jsx)("div",{className:"card-group",children:Object(U.jsxs)("div",{className:"row row-col-2 justify-content-center border-lg-dark py-2 align-items-center",children:[a.map((function(e){return Object(U.jsxs)("div",{className:"card col-3 m-3 shadow p-3",children:[Object(U.jsx)("img",{src:"/images/".concat(e.image),className:"card-img-top",alt:"Artwork"}),Object(U.jsxs)("div",{className:"card-body card text-center border-dark",children:[Object(U.jsx)("h5",{className:"card-title",children:e.title}),Object(U.jsxs)("p",{className:"flexible card-text",children:[e.description," "]}),Object(U.jsxs)("p",{className:"card-text",children:[" Category: ",e.category]}),Object(U.jsxs)("p",{className:"card-text",children:[" Starting Bid: ",e.startBid]}),Object(U.jsx)("a",{href:"/Product",className:"btn btn-outline-dark m-2 buttonStyle",children:"View Product"}),F.loggedIn()&&Object(U.jsx)(A.a,{className:"btn btn-outline-dark m-2 buttonStyle",onClick:function(){return s(e._id)},children:"Add to Watchlist"})]})]},e._id)})),";"]})})})})]})},R=function(){return Object(U.jsx)("div",{className:"container",children:Object(U.jsx)(J,{})})},V=a(30);var q=function(e){var t=Object(o.useState)({email:"",password:""}),a=Object(f.a)(t,2),n=a[0],c=a[1],r=Object(S.a)(B),s=Object(f.a)(r,2),i=s[0],l=s[1].error,d=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,i({variables:{email:n.email,password:n.password}});case 4:a=e.sent,c=a.data,F.login(c.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=e.target,a=t.name,r=t.value;c(Object(u.a)(Object(u.a)({},n),{},Object(V.a)({},a,r)))};return Object(U.jsx)("div",{className:"container pt-5",children:Object(U.jsxs)("div",{className:"pt-5 text-center",children:[Object(U.jsx)("h2",{children:"Login"}),Object(U.jsx)("p",{children:"Please login to see your watchlist and bid on new art!"}),Object(U.jsxs)("form",{onSubmit:d,children:[Object(U.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Email address: \xa0 "}),Object(U.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:j})]}),Object(U.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(U.jsx)("label",{htmlFor:"pwd",children:"Password: \xa0  "}),Object(U.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:j})]}),Object(U.jsx)("div",{children:Object(U.jsx)(m.b,{to:"Signup",className:"p-4",children:"Create a new account"})}),l?Object(U.jsx)("div",{children:Object(U.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(U.jsx)("div",{className:"flex-row flex-end p-2",children:Object(U.jsx)("button",{type:"submit",className:"btn btn-outline-dark m-2 buttonStyle",children:"Submit"})})]})]})})};var G=function(e){var t=Object(o.useState)({email:"",password:"",username:""}),a=Object(f.a)(t,2),n=a[0],c=a[1],r=Object(S.a)(T),s=Object(f.a)(r,1)[0],i=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s({variables:{email:n.email,password:n.password,username:n.username}});case 3:a=e.sent,c=a.data.addUser.token,F.login(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){var t=e.target,a=t.name,r=t.value;c(Object(u.a)(Object(u.a)({},n),{},Object(V.a)({},a,r)))};return Object(U.jsx)("div",{className:"container pt-5",children:Object(U.jsxs)("div",{className:"pt-5 text-center",children:[Object(U.jsx)("h2",{children:"Signup"}),Object(U.jsx)("p",{children:"Don't have an account? No problem. Create an account below!"}),Object(U.jsxs)("form",{onSubmit:i,children:[Object(U.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(U.jsx)("label",{htmlFor:"name",children:"Username:\xa0"}),Object(U.jsx)("input",{placeholder:"artRox",name:"username",type:"username",id:"username",onChange:l})]}),Object(U.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Email:\xa0"}),Object(U.jsx)("input",{placeholder:"artrox@email.com",name:"email",type:"email",id:"email",onChange:l})]}),Object(U.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(U.jsx)("label",{htmlFor:"pwd",children:"Password:\xa0 "}),Object(U.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:l})]}),Object(U.jsx)(m.b,{to:"Login",children:"Already have an account? Login Here."}),Object(U.jsx)("div",{className:"flex-row flex-end",children:Object(U.jsx)("button",{type:"submit",className:"btn btn-outline-dark m-2 buttonStyle",children:"Submit"})})]})]})})},z=function(){return Object(U.jsxs)("nav",{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark",children:[Object(U.jsxs)(m.b,{to:"/",className:"navbar-brand mx-5",id:"artWatchStyle",children:["art",Object(U.jsx)("a",{children:"Watch"})]}),F.loggedIn()?Object(U.jsxs)("div",{children:[Object(U.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(U.jsx)("span",{className:"navbar-toggler-icon"})}),Object(U.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(U.jsxs)("ul",{className:"navbar-nav ms-auto mx-5",children:[Object(U.jsx)("li",{className:"nav-item active",children:Object(U.jsx)(m.b,{to:"/Watchlist",className:"nav-link sr-only",children:"Watchlist"})}),Object(U.jsx)("li",{className:"nav-item active",children:Object(U.jsx)("a",{href:"/",className:"nav-link sr-only",onClick:function(){return F.logout()},children:"Logout"})})]})})]}):Object(U.jsxs)("div",{children:[Object(U.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(U.jsx)("span",{className:"navbar-toggler-icon"})}),Object(U.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(U.jsxs)("ul",{className:"navbar-nav ms-auto mx-5",children:[Object(U.jsx)("li",{className:"nav-item active",children:Object(U.jsx)(m.b,{to:"/Signup",className:"nav-link sr-only",children:"Signup"})}),Object(U.jsx)("li",{className:"nav-item active",children:Object(U.jsx)(m.b,{to:"/Login",className:"nav-link sr-only",children:"Login"})})]})})]})]})},H=function(){var e=Object(k.a)($),t=(e.loading,e.data),a=e.error;console.log("--data",t),console.log(JSON.stringify(a,null,2));var n=(null===t||void 0===t?void 0:t.user.watchlist)||[];return console.log("---",n),Object(U.jsxs)("div",{className:"container p-3",children:[Object(U.jsx)("h1",{className:"text-center pt-5",children:"View Your Watchlist:"}),Object(U.jsx)("div",{className:"card_wrap--outer",children:Object(U.jsx)("div",{className:"card__wrap--inner",children:Object(U.jsx)("div",{className:"card-group",children:Object(U.jsxs)("div",{className:"row row-col-2 justify-content-center border-lg-dark py-2 align-items-center",children:[n.map((function(e){return Object(U.jsxs)("div",{className:"card col-3 m-3 shadow p-3",children:[Object(U.jsx)("img",{src:"/images/".concat(e.image),className:"card-img-top",alt:"Artwork"}),Object(U.jsxs)("div",{className:"card-body card text-center border-dark",children:[Object(U.jsx)("h5",{className:"card-title",children:e.title}),Object(U.jsxs)("p",{className:"flexible card-text",children:[e.description," "]}),Object(U.jsxs)("p",{className:"card-text",children:[" Category: ",e.category]}),Object(U.jsxs)("p",{className:"card-text",children:[" Starting Bid: ",e.startBid]}),Object(U.jsx)("a",{href:"/Bid",className:"btn btn-outline-dark m-2 buttonStyle",children:"Bid"}),Object(U.jsx)("a",{href:"/",className:"btn btn-outline-dark m-2 buttonStyle",children:"Back to Gallery"}),Object(U.jsx)("a",{href:"/Remove",className:"btn btn-outline-dark m-2 buttonStyle",children:"Remove from Watchlist"})]})]},e._id)})),";"]})})})})]})},M=function(){return Object(U.jsx)("div",{className:"container",children:Object(U.jsx)(H,{})})},Y=Object(h.a)({uri:"/graphql"}),K=Object(v.a)((function(e,t){var a=t.headers,n=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),Q=new x.a({link:K.concat(Y),cache:new O.a});var X=function(){return Object(U.jsx)(g.a,{client:Q,children:Object(U.jsx)(m.a,{children:Object(U.jsxs)("div",{children:[Object(U.jsx)(z,{}),Object(U.jsxs)(p.c,{children:[Object(U.jsx)(p.a,{exact:!0,path:"/",component:R}),Object(U.jsx)(p.a,{exact:!0,path:"/login",component:q}),Object(U.jsx)(p.a,{exact:!0,path:"/signup",component:G}),Object(U.jsx)(p.a,{exact:!0,path:"/Watchlist",component:M})]})]})})})};b.a.render(Object(U.jsx)(d.a.StrictMode,{children:Object(U.jsx)(X,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.62bd914d.chunk.js.map